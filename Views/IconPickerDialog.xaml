<Window x:Class="Boutique.Views.IconPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Icon"
        Width="480" Height="400"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip"
        ShowInTaskbar="False"
        MinWidth="320" MinHeight="300"
        Background="{StaticResource Brush.CardBackground}">

  <Grid x:Name="RootGrid" Margin="12">
    <Grid.LayoutTransform>
      <ScaleTransform x:Name="RootScaleTransform" ScaleX="1" ScaleY="1" />
    </Grid.LayoutTransform>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Grid Grid.Row="0" Margin="0,0,0,8">
      <TextBox x:Name="SearchBox"
               Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
               FontSize="13"
               Padding="6,4" />
      <TextBlock Text="Filter icons..." Foreground="Gray"
                 IsHitTestVisible="False"
                 Margin="8,0,0,0" VerticalAlignment="Center"
                 Visibility="{Binding Text, ElementName=SearchBox, Converter={StaticResource StringEmptyToVisConverter}, ConverterParameter=Inverse}" />
    </Grid>

    <Border Grid.Row="1" BorderBrush="{DynamicResource Brush.Border}" BorderThickness="1" CornerRadius="2">
      <ScrollViewer x:Name="IconScrollViewer" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <ItemsControl x:Name="IconsItemsControl">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <WrapPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Button Width="32" Height="32" Margin="2"
                      Click="IconButton_Click"
                      Tag="{Binding}"
                      ToolTip="{Binding}"
                      Background="Transparent"
                      BorderThickness="2"
                      Cursor="Hand">
                <Button.Style>
                  <Style TargetType="Button">
                    <Setter Property="BorderBrush" Value="Transparent" />
                    <Style.Triggers>
                      <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="BorderBrush" Value="{DynamicResource Brush.TextSecondary}" />
                      </Trigger>
                    </Style.Triggers>
                  </Style>
                </Button.Style>
                <Image Width="16" Height="16"
                       RenderOptions.BitmapScalingMode="NearestNeighbor"
                       Source="{Binding Converter={StaticResource IconNameToUriConverter}}" />
              </Button>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </ScrollViewer>
    </Border>

    <Grid Grid.Row="2" Margin="0,12,0,0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>

      <Button Grid.Column="0" Content="Clear Icon"
              Click="ClearButton_Click"
              MinWidth="80"
              Padding="12,6" />

      <Button Grid.Column="2" Content="Cancel"
              Click="CancelButton_Click"
              IsCancel="True"
              MinWidth="80"
              Margin="0,0,8,0"
              Padding="12,6" />
      <Button Grid.Column="3" Content="OK"
              Click="OkButton_Click"
              IsDefault="True"
              MinWidth="80"
              Padding="12,6" />
    </Grid>
  </Grid>
</Window>
